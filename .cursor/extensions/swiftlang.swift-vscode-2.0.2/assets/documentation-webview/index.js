"use strict";function l(){if("webkit"in window)throw new Error("A CommunicationBridge has already been established");return new Promise((e,a)=>{try{let s=new Set;Object.defineProperty(window,"webkit",{value:{messageHandlers:{bridge:{postMessage(r){s.forEach(o=>o(r))}}}},writable:!1});let i;Object.defineProperty(window,"bridge",{get(){return i},set(r){i=r,e({send(o){r.receive(o)},onDidReceiveMessage(o){return s.add(o),{dispose(){s.delete(o)}}}})}})}catch(s){a(s)}})}var d=class{constructor(){this.containerElement=g(),this.iconElement=u(),this.messageElement=y(),this.containerElement.appendChild(this.iconElement),this.containerElement.appendChild(this.messageElement),window.document.body.appendChild(this.containerElement)}show(a){this.messageElement.textContent=a,this.containerElement.style.display="flex"}hide(){this.containerElement.style.display="none"}};function g(){let e=document.createElement("div");return e.style.backgroundColor="var(--vscode-editor-background)",e.style.color="var(--vscode-foreground)",e.style.fontFamily="var(--vscode-font-family)",e.style.fontWeight="var(--vscode-font-weight)",e.style.width="100%",e.style.height="100%",e.style.display="none",e.style.gap="10px",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",e.style.position="absolute",e.style.top="0",e.style.left="0",e}function u(){let e=document.createElement("span");return e.className="codicon codicon-error",e.style.color="var(--vscode-editorError-foreground)",e.style.fontSize="48px",e}function y(){let e=document.createElement("span");return e.style.fontSize="14px",e}l().then(async e=>{let a=acquireVsCodeApi(),s,i,r=new d;e.onDidReceiveMessage(t=>{switch(t.type){case"rendered":if(i){setTimeout(()=>{e.send({type:"contentUpdate",data:i}),i=void 0},1);break}a.postMessage({type:"rendered"});break}}),window.addEventListener("message",t=>{if(typeof t.data!="object"||!("type"in t.data))return;let n=t.data;switch(n.type){case"update-content":o(n.content);break}});function o(t){if(t.type==="render-node"){m();let n=t.renderNode,c=(()=>{switch(n.kind){case"symbol":case"article":return"/live/documentation";case"overview":return"/live/tutorials-overview";default:return"/live/tutorials"}})();s!==c?(s=c,i=n,e.send({type:"navigation",data:c})):e.send({type:"contentUpdate",data:n})}else p(t.errorMessage),a.postMessage({type:"rendered"})}function p(t){let n=window.document.getElementById("app");n&&(n.style.display="none"),r.show(t)}function m(){let t=window.document.getElementById("app");t&&(t.style.display="block"),r.hide()}a.postMessage({type:"loaded"})});
//# sourceMappingURL=index.js.map
